# 线程池
## 1. Java线程池参数的含义
        5.1）如果运行线程少于corePoolSize，创建新线程来执行任务
        5.2）如果运行线程等于或大于corePoolSize，则加入阻塞队列
        5.3）如果无法加入阻塞队列，则创建新的线程来处理任务；
        5.4）如果创建新线程超出maxPoolSize，任务将被拒绝，并调用RejectExecutionHandler.rejectedExecution方法
        饱和策略：
            AbortPolicy：直接抛出异常
            CallerRunsPolicy：调用者所在的线程运行任务
            DiscardOldestPolicy：丢弃队列中最近的一个任务，并执行当前任务；
            DiscardPolicy：不处理，丢弃掉

## 2. 线程池执行任务的过程
    参考：https://blog.csdn.net/u011240877/article/details/73440993
    当提交一个新任务时：
    6.1）线程池判断核心线程池里的线程是否都在执行任务，如果不是，则创建一个新的工作线程来执行任务。如果池里的线程都在执行任务，进入下一个流程：
    6.2）线程池判断工作队列已满。如果没满，则加入队列，如果满了，则进入下一个流程：
    6.3）线程池判断线程池的线程是否处于工作状态，如没有，则创建一个新的工作线程来执行任务，如果已经满了，交给饱和策略来处理这个任务；

## 3. 如何配置线程池？
    > https://www.ibm.com/developerworks/cn/java/j-jtp0730/
    7.1）CPU密集型，线程数与CPU个数相当
    7.2）IO密集型，由于阻塞等待，cpu*2
        您可以估计某个典型请求的等待时间（WT）与服务时间（ST）之间的比例。如果我们将这一比例称之为 WT/ST，那么对于一个具有 N 个处理器的系统，需要设置大约 N*(1+WT/ST) 个线程来保持处理器得到充分利用。
    7.3）阻塞队列选择：一般情况下使用有界队列；暴增业务需求使用无界队列；
    7.4）吞吐量：使用无阻塞队列CAS操作可以提高吞吐量
